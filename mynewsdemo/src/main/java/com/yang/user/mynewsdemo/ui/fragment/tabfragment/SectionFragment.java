package com.yang.user.mynewsdemo.ui.fragment.tabfragment;import android.os.Bundle;import android.support.annotation.Nullable;import android.support.v4.app.Fragment;import android.support.v4.widget.SwipeRefreshLayout;import android.support.v7.widget.GridLayoutManager;import android.support.v7.widget.RecyclerView;import android.util.Log;import android.view.LayoutInflater;import android.view.View;import android.view.ViewGroup;import com.google.gson.Gson;import com.google.gson.GsonBuilder;import com.yang.user.mynewsdemo.R;import com.yang.user.mynewsdemo.ui.adapter.ZhihuSectionAdapter;import com.yang.user.mynewsdemo.ui.api.ZhihuApis;import com.yang.user.mynewsdemo.ui.bean.SectionListBean;import com.yang.user.mynewsdemo.ui.utils.SnackbarUtil;import java.util.ArrayList;import java.util.List;import butterknife.BindView;import butterknife.ButterKnife;import retrofit2.Call;import retrofit2.Callback;import retrofit2.Response;import retrofit2.Retrofit;import retrofit2.converter.gson.GsonConverterFactory;/** * Created by User on 2017/3/10. */public class SectionFragment extends Fragment {    private View view;    LayoutInflater layoutInflater;    @BindView(R.id.rv_content)    RecyclerView rvSectionList;    @BindView(R.id.swipe_refresh)    SwipeRefreshLayout swipeRefresh;    List<SectionListBean.DataBean> mList = new ArrayList<SectionListBean.DataBean>();    ZhihuSectionAdapter adapter;    @Nullable    @Override    public View onCreateView(LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {        layoutInflater = LayoutInflater.from(getActivity());        view = layoutInflater.inflate(R.layout.tabfragment_section, container, false);        ButterKnife.bind(this, view);        initView();        initData();        loadUpData();        return view;    }    private void loadUpData() {        swipeRefresh.setOnRefreshListener(new SwipeRefreshLayout.OnRefreshListener() {            @Override            public void onRefresh() {                mList.clear();                initData();                adapter.notifyDataSetChanged();                swipeRefresh.setRefreshing(false);                SnackbarUtil.showShort(getActivity().getWindow().getDecorView(), "刷新成功");            }        });    }    private void initData() {        final Gson gson = new GsonBuilder().create();        Retrofit retrofit = new Retrofit.Builder().baseUrl(ZhihuApis.HOST).addConverterFactory(GsonConverterFactory.create(gson)).build();        ZhihuApis zhihuapi = retrofit.create(ZhihuApis.class);        Call<SectionListBean> sectionbean = zhihuapi.getSelectlistbean(4);        sectionbean.enqueue(new Callback<SectionListBean>() {            @Override            public void onResponse(Call<SectionListBean> call, Response<SectionListBean> response) {                mList = response.body().getData();                Log.e("yangjie", "...." + mList.get(1).getThumbnail());                Log.e("yangjie", "...." + mList.get(2).getName());                Log.e("yangjie", "...." + mList.get(3).getDescription());                adapter = new ZhihuSectionAdapter(getActivity(), mList);                rvSectionList.setAdapter(adapter);                adapter.notifyDataSetChanged();            }            @Override            public void onFailure(Call<SectionListBean> call, Throwable t) {            }        });    }    private void initView() {        rvSectionList.setLayoutManager(new GridLayoutManager(getActivity(), 2));    }}